<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Timetable</title>
  <style>
    table { border-collapse: collapse; width: 100%; }
    th, td { border: 1px solid #ddd; padding: 8px; vertical-align: top; }
    th { background: #f4f4f4; text-align: center; }
    .break-cell { background: #faf3d6; text-align: center; font-weight: bold; }
    .period-cell { min-height: 60px; }
    .day-col { width: 140px; font-weight: 600; text-align: left; }
  </style>
</head>
<body>
  <h2>Timetable</h2>

  <form method="get">
    <label for="section">Section:</label>
    <select name="section_id" id="section" onchange="this.form.submit()">
      <option value="">-- choose section --</option>
      {% for sec in sections %}
        <option value="{{ sec.id }}" {% if selected_section_id == sec.id %}selected{% endif %}>{{ sec }}</option>
      {% endfor %}
    </select>
  </form>

  {% if table_rows %}
    <table>
      <thead>
        <tr>
          <th>Day</th>
          {% for header in period_headers %}
            <th>{{ header }}</th>
          {% endfor %}
        </tr>
      </thead>
      <tbody>
        {% for row in table_rows %}
          <tr>
            <td class="day-col">{{ row.day_name }}</td>

            {% for cell in row.cells %}
              {% if cell and cell.break %}
                <td class="break-cell">
                  {{ cell.break }}<br>
                  <small>({{ cell.start_time }} - {{ cell.end_time }})</small>
                </td>
              {% elif cell %}
                <td class="period-cell">
                  <strong>{{ cell.subject }}</strong><br>
                  {{ cell.faculty }}<br>
                  {{ cell.classroom }}<br>
                  <small>({{ cell.start_time }} - {{ cell.end_time }})</small>
                </td>
              {% else %}
                <td></td>
              {% endif %}
            {% endfor %}

          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <p>Select a section to view the timetable.</p>
  {% endif %}

</body>
</html>
